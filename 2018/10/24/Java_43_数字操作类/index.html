<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="JiaojiaoFu"><link rel="alternative" href="/atom.xml" title="姣姣的个人主页" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Chapter 43 数字操作类 - 姣姣的个人主页</title><link rel="stylesheet" href="/css/main.css" type="text/css">
<link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css" type="text/css">
<!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js" type="text/javascript"></script>
<script src="/js/fancybox/jquery.fancybox.min.js" type="text/javascript"></script>
</head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">姣姣的个人主页</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-10-23T16:00:00.000Z">October 24, 2018</time><h1 class="post__title"><a href="/2018/10/24/Java_43_数字操作类/">Chapter 43 数字操作类</a></h1><div class="post__main echo"><p>重点学习大浮点数 BigDecimal 类的使用，实现准确的四舍五入操作<br><a id="more"></a></p>
<h3 id="数字操作类">数字操作类</h3>
<h4 id="1-_Math_类">1. Math 类</h4>
<p>Math 类是一个专门进行数学计算的操作类，提供了一系列的数学计算方法。<br>Math 类中提供的方法都是 static 型的，因为 Math没有普通属性，(属性：Math.E、Math.PI)。<br><strong>重点方法</strong> 四舍五入：<code>public static long round(double a)</code><br><code>long</code> 比 <code>int</code> 的保存范围大， <code>int</code> 可能会发生溢出。<br><strong>注意：</strong> 传入负数时，大于 <code>0.5</code> 才进位，小于等于 <code>0.5</code> 不进位</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Math.<span class="built_in">round</span>(<span class="number">15.5</span>) // outpu<span class="variable">t:16</span></div><div class="line">Math.<span class="built_in">round</span>(-<span class="number">15.5</span>) // outpu<span class="variable">t:</span>-<span class="number">15</span></div><div class="line">Math.<span class="built_in">round</span>(-<span class="number">15.51</span>) // outpu<span class="variable">t:</span>-<span class="number">16</span></div></pre></td></tr></table></figure>

<h4 id="2-_Random_类">2. Random 类</h4>
<p>取得随机数的操作类，Random 在 java.util 包下。<br><strong>示例1：</strong> 产生 10 个不大于 100 的正整数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs){</div><div class="line">        Random rand = <span class="keyword">new</span> Random();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span> ;i &lt; <span class="number">10</span>; i++){</div><div class="line">            System.out.print(rand.nextInt(<span class="number">100</span>) + <span class="string">"、"</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>示例2</strong>：产生36 选 7的功能，边界值为 37，不能有 0 或者重复的数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) {</div><div class="line">        Random rand = <span class="keyword">new</span> Random();</div><div class="line">        <span class="keyword">int</span>[] data = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">7</span>];        <span class="comment">// 开辟一个 7 元素的数组</span></div><div class="line">        <span class="keyword">int</span> foot = <span class="number">0</span>;       <span class="comment">// 此为数组操作脚标</span></div><div class="line">        <span class="keyword">while</span> (foot &lt; <span class="number">7</span>){       <span class="comment">// 不知道循环多少次，所以使用 while 循环</span></div><div class="line">            <span class="keyword">int</span> num = rand.nextInt(<span class="number">37</span>);</div><div class="line">            <span class="keyword">if</span>(!isRepeat(data,num)){</div><div class="line">                data[ foot++ ] = num;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        java.util.Arrays.sort(data);    <span class="comment">// 按序输出，更清晰</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++){</div><div class="line">            System.out.print(data[i]+<span class="string">"、"</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="javadoc">/**</span></div><div class="line">     * 此方法主要是判断是否有重复数据，但是不允许保存 0</div><div class="line">     *<span class="javadoctag"> @param</span> temp 指已经保存的数据</div><div class="line">     *<span class="javadoctag"> @param</span> num  指新生成的数据</div><div class="line">     *<span class="javadoctag"> @return</span>  如果存在则返回 true，不存在则返回 false</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isRepeat</span>(<span class="keyword">int</span>[] temp, <span class="keyword">int</span> num){</div><div class="line">        <span class="keyword">if</span>(num == <span class="number">0</span>){</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; temp.length; i++){</div><div class="line">            <span class="keyword">if</span>(temp[i] == num){</div><div class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="3-_大整数操作类：BigInteger_类">3. 大整数操作类：BigInteger 类</h4>
<p>如果有两个很大的数字要进行数字计算（超出 double 的范围）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) {</div><div class="line">        System.out.println(Double.MAX_VALUE*Double.MAX_VALUE);      <span class="comment">// 输出为 Infinity</span></div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>思考：这种情况该怎么做：<br>超过 double 的范围那么只能用 String 保存，然后按位取出每一个字符保存的数据进行计算。考虑到这种情况 Java 提供了 BigInteger、BigDecimal 两种大数字操作类。<br>BigInteger 的构造方法：<code>public BigInteger(String val)</code><br><strong>示例：</strong> BigInteger 对象之间的加减乘除操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.math.BigInteger;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) {</div><div class="line">        BigInteger bigA = <span class="keyword">new</span> BigInteger(<span class="string">"232435784545847598"</span>);</div><div class="line">        BigInteger bigB = <span class="keyword">new</span> BigInteger(<span class="string">"2444545345431"</span>);</div><div class="line">        System.out.println(<span class="string">"加法操作："</span> + bigA.add(bigB));</div><div class="line">        System.out.println(<span class="string">"减法操作："</span> + bigA.subtract(bigB));</div><div class="line">        System.out.println(<span class="string">"乘法操作："</span> + bigA.multiply(bigB));</div><div class="line">        System.out.println(<span class="string">"除法操作："</span> + bigA.divide(bigB)); <span class="comment">//结果为整数</span></div><div class="line">        <span class="comment">// 数组里面有两个元素，第一个元素表示商，第二个元素表示余数</span></div><div class="line">        BigInteger result[] = bigA.divideAndRemainder(bigB);</div><div class="line">        System.out.println(<span class="string">"商是："</span> + result[<span class="number">0</span>] + <span class="string">"、余数是："</span> + result[<span class="number">1</span>]);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="4-_大浮点数：BigDecimal（重点）">4. 大浮点数：BigDecimal（<strong><em>重点</em></strong>）</h4>
<p>BigInteger 不能保存小数，BigDecimal 可以保存小数。<br>BigDecimal 的构造方法：</p>
<ul>
<li>构造一：<code>public BigDecimal(String val)</code></li>
<li>构造二：<code>public BigDecimal(double val)</code><br>与 BigInteger 一样，BigDecimal 也支持基础的数学运算，但是 BigDecimal 能实现准确的四舍五入操作。 </li>
</ul>
<p>Math.round() 方法中所有的小数都被丢弃了。<br>BigDecimal 提供了一个除法 ： public BigDecimal divide(BigDecimal divisor,int scale,int roundingMode)</p>
<ol>
<li>BigDecimal divisor :被除数；</li>
<li>int scale: 保留的小数位；</li>
<li>int roundingMode：进位模式（<code>public static final int ROUND_HALF_UP</code> 这个常量描述的就是四舍五入的进位模式）</li>
</ol>
<p><strong>范例：</strong> 实现准确的四舍五入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.math.BigDecimal;</div><div class="line"></div><div class="line">class MyMath{</div><div class="line">    <span class="javadoc">/**</span></div><div class="line">     * 实现准确位数的四舍五入操作</div><div class="line">     *<span class="javadoctag"> @param</span> num 要进行四舍五入操作的数字</div><div class="line">     *<span class="javadoctag"> @param</span> scale 要保留的小数位</div><div class="line">     *<span class="javadoctag"> @return</span> 处理后的四舍五入数据</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">round</span>(<span class="keyword">double</span> num,<span class="keyword">int</span> scale){</div><div class="line">        BigDecimal bigA= <span class="keyword">new</span> BigDecimal(num);</div><div class="line">        BigDecimal bigB = <span class="keyword">new</span> BigDecimal(<span class="number">1</span>);</div><div class="line">        <span class="comment">// bigA.divide(...)类型是 BigDecimal</span></div><div class="line">        <span class="comment">// BigDecimal 是 Number的子类，可以找到 doubleValue() 方法返回 double 值</span></div><div class="line">        <span class="keyword">return</span> bigA.divide(bigB,scale,BigDecimal.ROUND_HALF_UP).doubleValue();</div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) {</div><div class="line">        <span class="keyword">double</span> num = <span class="number">24.458748537</span>;</div><div class="line">        System.out.println(MyMath.round(num,<span class="number">2</span>));</div><div class="line">        System.out.println(MyMath.round(<span class="number">15.5</span>,<span class="number">0</span>));       <span class="comment">// 结果为 16</span></div><div class="line">        System.out.println(MyMath.round(-<span class="number">15.5</span>,<span class="number">0</span>));      <span class="comment">// 结果为 -16</span></div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>此类操作的功能在日后开发中一定会使用，属于工具类的支持范畴。</p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Java/">Java</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 JiaojiaoFu</div></footer><script src="/js/scroller.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>
</body></html>