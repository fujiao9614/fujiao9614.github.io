<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="JiaojiaoFu"><link rel="alternative" href="/atom.xml" title="姣姣的个人主页" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Chapter 53 System 类对 IO 的支持 - 姣姣的个人主页</title><link rel="stylesheet" href="/css/main.css" type="text/css">
<link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css" type="text/css">
<!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js" type="text/javascript"></script>
<script src="/js/fancybox/jquery.fancybox.min.js" type="text/javascript"></script>
</head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">姣姣的个人主页</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-10-23T16:00:00.000Z">October 24, 2018</time><h1 class="post__title"><a href="/2018/10/24/Java_53_System对IO的支持/">Chapter 53 System 类对 IO 的支持</a></h1><div class="post__main echo"><p>在 System 类里面为了支持 IO 操作专门提供有三个常量：错误输出、输出到标准输出设备（显示器）、从标准输入设备读取（键盘）等基础实现和用法<br><a id="more"></a></p>
<h3 id="System_类对_IO_的支持（了解）">System 类对 IO 的支持（了解）</h3>
<h4 id="1-_输出">1. 输出</h4>
<p>在 System 类里面为了支持 IO 操作专门提供有三个常量：</p>
<ul>
<li>错误输出：<code>public static final PrintStream err;</code> </li>
<li>输出到标准输出设备（显示器）：<code>public static final PrintStream out;</code></li>
<li>从标准输入设备读取（键盘）：<code>public static final InputStream in;</code></li>
</ul>
<p>1.1 错误输出（没用）</p>
<p>System.err 是 PrintStream 的类，此类专门进行错误信息的输出操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs){</div><div class="line">        <span class="keyword">try</span>{</div><div class="line">            Integer.parseInt(<span class="string">"abc"</span>);</div><div class="line">        }<span class="keyword">catch</span>(Exception e){</div><div class="line">            <span class="comment">// 两个输出一样，颜色不一样：</span></div><div class="line">            <span class="comment">// java.lang.NumberFormatException: For input string: "abc"</span></div><div class="line">            System.err.println(e);</div><div class="line">            System.out.println(e);</div><div class="line">        }</div><div class="line">   }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>严格来讲，System.err 和 System.out 输出的错误是一样的，System.err 输出不让用户看到的错误信息，System.out 输出可以让用户看到的信息，但是现在已经不做区分了。</p>
<p>1.2 信息输出（System.out）</p>
<p>System.out 是 Java 中专门准备的支持屏幕输出信息的操作对象（此对象由系统负责实例化），使用 Sytem.out 实现一个简单的输出操作<br>System.out 是 PrintStream 的对象， PrintStream 是 OutputStream 的子类，因此<br><strong>示例</strong>使用 OutputStream 进行屏幕输出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.OutputStream;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) <span class="keyword">throws</span> IOException {</div><div class="line">        <span class="comment">// OutputStream 变为了屏幕输出</span></div><div class="line">        OutputStream out = System.out;</div><div class="line">        <span class="comment">// 屏幕输出</span></div><div class="line">        out.write(<span class="string">"Hello, world!"</span>.getBytes()); </div><div class="line">   }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>以上代码，体现了 Java 的多态性。根据实例化子类的不同，选择不同的方法。<br>结合 JDK 1.8 的函数式功能接口，它可以为消费型函数式接口做方法引用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.util.function.Consumer;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) {</div><div class="line">        Consumer&lt;String&gt; con = System.out :: println;</div><div class="line">        <span class="comment">// 屏幕输出</span></div><div class="line">        con.accept(<span class="string">"Hello, world!"</span>);</div><div class="line">   }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>Java 系统里，System.out 是系统默认提供好的实例化对象，不需要用户进行明确的实例化操作。但是文件、内存需要进行明确的实例化操作。</p>
<h4 id="2-_系统输入_System-in（不使用）">2. 系统输入 System.in（不使用）</h4>
<p>Java 类中有一个 in 的对象，类型为 InputStream。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.InputStream;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) <span class="keyword">throws</span> IOException {</div><div class="line">        InputStream in =  System.in;</div><div class="line">        <span class="keyword">byte</span> data[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">        System.out.println(<span class="string">"请输入数据："</span>);</div><div class="line">        <span class="keyword">int</span> len = in.read(data);</div><div class="line">        System.out.println(<span class="string">"输入的数据为："</span> + <span class="keyword">new</span> String(data,<span class="number">0</span>,len) );</div><div class="line">   }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>与之前最大的不同，只是更换了一个实例化对象。存在的问题：超过数组长度的数据将不会被保存。<br>想办法解决长度限制：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.InputStream;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) <span class="keyword">throws</span> IOException {</div><div class="line">        InputStream in =  System.in;</div><div class="line">        StringBuffer buf = <span class="keyword">new</span> StringBuffer();</div><div class="line">        System.out.println(<span class="string">"请输入数据："</span>);</div><div class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>((temp = in.read()) != -<span class="number">1</span>){</div><div class="line">            <span class="keyword">if</span>(temp == <span class="string">'\n'</span>){</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            }</div><div class="line">            buf.append((<span class="keyword">char</span>)temp);</div><div class="line">        }</div><div class="line">        System.out.println(<span class="string">"输入的数据为："</span> + buf );</div><div class="line">   }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>以上操作虽然没有了长度限制，但是依然无法使用，输入中文时成为乱码。一个中文两个字符，四个字节。</p>
<h4 id="3-_总结">3. 总结</h4>
<p>System 类对于 IO 的各种操作并不会经常使用到，唯一可以使用到的也是 System.out.println() 之类的方法，对于此部分需要清楚一点：System.out 使用的是 PrintStream类对象进行标准输出设备的显示的。</p>
<p>【<em>遗留问题</em>】：中文怎么输入？ </p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Java/">Java</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 JiaojiaoFu</div></footer><script src="/js/scroller.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>
</body></html>