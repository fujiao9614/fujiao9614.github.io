<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="JiaojiaoFu"><link rel="alternative" href="/atom.xml" title="姣姣的个人主页" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>文件操作类 - 姣姣的个人主页</title><link rel="stylesheet" href="/css/main.css" type="text/css">
<link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css" type="text/css">
<!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js" type="text/javascript"></script>
<script src="/js/fancybox/jquery.fancybox.min.js" type="text/javascript"></script>
</head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">姣姣的个人主页</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-10-23T16:00:00.000Z">October 24, 2018</time><h1 class="post__title"><a href="/2018/10/24/Java_49_文件操作类/">文件操作类</a></h1><div class="post__main echo"><p>进行所有的文件或者文件内容的开发操作<br><a id="more"></a></p>
<h3 id="文件操作类">文件操作类</h3>
<h4 id="1-_基本操作">1. 基本操作</h4>
<p>学习原则：抽象类中定义的抽象方法会根据实例化子类的不同，完成不同的功能。<br>使用 File 类进行文件的操作。<br>如果想要进行所有的文件或者文件内容的开发操作，需要使用 <code>java.io</code> 包完成，这个包中包含五个核心类以及一个核心接口：</p>
<ul>
<li>五个核心类：File、InputStream、OutputStream、Reader、Writer；</li>
<li>一个核心接口：Serializable。<br>在 java.io 包中，File 类是唯一一个与文件本身操作有关的类，但不涉及到文件的具体内容。文件的本身指的是文件的创建删除等操作。  </li>
</ul>
<p>使用 File，首先要根据它提供的构造方法定义一个要操作的文件的路径：</p>
<ul>
<li>【重点】设置完整的路径：<code>public File(String pathname)</code>，大部分情况下使用此操作；</li>
<li>设置父路径和子文件：<code>public File(File parent,String child)</code>，在 Android 开发中使用比较多。</li>
</ul>
<p><strong>示例</strong>：操作文件</p>
<ul>
<li>创建文件：<code>public boolean createNewFile() throws IOException</code><ul>
<li>抛异常的原因：</li>
</ul>
<ol>
<li>目录不能访问 </li>
<li>文件重名，或者文件名称错误</li>
</ol>
</li>
<li>【重要】判断文件是否存在：<code>public boolean exists()</code></li>
<li>【重要】删除文件：<code>public boolean delete()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) <span class="keyword">throws</span> Exception{ <span class="comment">// 处理异常</span></div><div class="line">        File file = <span class="keyword">new</span> File(<span class="string">"./test.txt"</span>);</div><div class="line">        <span class="keyword">if</span>(file.exists()){  <span class="comment">// 如果文件存在则删除</span></div><div class="line">            file.delete();</div><div class="line">        }<span class="keyword">else</span>{      <span class="comment">// 文件不存在则创建</span></div><div class="line">            System.out.println(file.createNewFile());</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>Windows 下使用 “\” 作为路径分隔符，Linux 下使用 “/” 路径分隔符；</p>
<ul>
<li>在 File 中提供了一个常量：<code>public static final String separator</code>，注意是小写，全局常量应该全大写命名。  </li>
<li>文件路径应改为：<br><code>File file = new File(&quot;.&quot; + File.separator +&quot;test.txt&quot;);</code></li>
<li>在进行 java.io 操作过程中，会有延迟现象，因为现在是 JVM 间接调用操作系统的文件系统函数进行文件处理操作，所以中间会出现延迟情况。（不要快速删除创建）</li>
</ul>
<h4 id="2-_File_类操作方法">2. File 类操作方法</h4>
<p><code>File file = new File(&quot;.&quot; + File.separator + &quot;demo&quot;+ File.separator +&quot;test.txt&quot;);</code><br>如果创建文件路径中某个文件夹不存在，系统认为此时的路径无法使用，那么无法进行文件创建（例如 demo 文件夹不存在，创建失败）。因此需要判断要创建的父路径是否存在：</p>
<ul>
<li>【重点】找到父路径：<code>public File getParentFile()</code>;</li>
<li>【重点】创建目录（多级目录）：<code>public boolean mkdirs()</code>;<br><strong>示例</strong>：找到父路径、创建目录。要注意 创建父路径， <code>file.mkdirs()</code> 会将子文件也创建。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) <span class="keyword">throws</span> Exception{ <span class="comment">// 处理异常</span></div><div class="line">        File file = <span class="keyword">new</span> File(<span class="string">"."</span> + File.separator +<span class="string">"filetest"</span> + File.separator +<span class="string">"demo"</span>+ File.separator+<span class="string">"test.txt"</span>);</div><div class="line">        <span class="keyword">if</span>(!file.getParentFile().exists()){ <span class="comment">// 父路径不存在</span></div><div class="line">            <span class="comment">//file.mkdirs();      // 创建父路径以及子文件</span></div><div class="line">            file.getParentFile().mkdirs();  <span class="comment">// 创建父路径</span></div><div class="line">            System.out.println(<span class="string">"路径创建完成"</span>);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(file.exists()){  <span class="comment">// 如果文件存在则删除</span></div><div class="line">            file.delete();</div><div class="line">            System.out.println(<span class="string">"删除完成"</span>);</div><div class="line">        }<span class="keyword">else</span>{      <span class="comment">// 文件不存在则创建</span></div><div class="line">            System.out.println(file.createNewFile());</div><div class="line">            System.out.println(<span class="string">"文件创建完成"</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>File 中还有一些取得文件信息内容的操作功能：</p>
<ul>
<li>取得文件大小：<code>public long length()</code>，long 型用来表示时间、日期、内存大小，返回结果为字节</li>
<li>判断是否是文件：<code>public boolean isFile()</code></li>
<li>判断是否是目录：<code>public boolean isDirectory()</code></li>
<li>最近一次修改时间：<code>public long lastModified()</code></li>
<li>其他操作：<code>getPath()</code>、<code>getName()</code>、<code>getTotalSpace()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.math.BigDecimal;</div><div class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) <span class="keyword">throws</span> Exception{ <span class="comment">// 处理异常</span></div><div class="line">        File file = <span class="keyword">new</span> File(<span class="string">"."</span>+File.separator+<span class="string">"DSC01450.JPG"</span>);</div><div class="line">        <span class="keyword">if</span>(file.exists()) {  <span class="comment">// 如果文件存在则进行文件大小判断</span></div><div class="line">            System.out.println(<span class="string">"是否是文件："</span>+file.isFile());</div><div class="line">            System.out.println(<span class="string">"是否是目录："</span>+file.isDirectory());</div><div class="line">            <span class="comment">// System.out.println("文件大小为：" + file.length());   // 单位为字节</span></div><div class="line">            System.out.println(<span class="string">"文件大小为："</span> + <span class="keyword">new</span> BigDecimal((<span class="keyword">double</span>) file.length() / <span class="number">1024</span> / <span class="number">1024</span>).divide</div><div class="line">                    (<span class="keyword">new</span> BigDecimal(<span class="number">1</span>),<span class="number">2</span>,BigDecimal.ROUND_HALF_UP)+<span class="string">"M"</span>);   <span class="comment">// 单位为 M</span></div><div class="line">            <span class="comment">// System.out.println("上一次修改时间为："+file.lastModified());    // 单位为 ms</span></div><div class="line">            <span class="comment">// System.out.println("上一次修改时间为："+ new Date(file.lastModified()));    // 单位为 Date 类型的形式</span></div><div class="line">            System.out.println(<span class="string">"上一次修改时间为："</span>+ <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>).format(<span class="keyword">new</span> Date(file.lastModified())));</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span>{</div><div class="line">            System.out.println(<span class="string">"文件不存在"</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="3-_操作目录">3. 操作目录</h4>
<p>File 类中定义了两个列出目录的方法：</p>
<ul>
<li>列出目录的信息：<code>public String[] list()</code>，列出的是目录下的子目录或者文件的名字</li>
<li>列出所有的信息以及 File 类的包装：<code>public File[] listFile()</code>，取得文件对象列表会更加方便，因为可以继续取出很多内容。<br><strong>示例</strong>：按照资源管理器的形式输出路径下的文件名/文件夹名称、创建时间、类型、大小。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.math.BigDecimal;</div><div class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) <span class="keyword">throws</span> Exception{ <span class="comment">// 处理异常</span></div><div class="line">        File file = <span class="keyword">new</span> File(<span class="string">"/Users"</span>+File.separator + <span class="string">"fjiao"</span>);</div><div class="line">        <span class="keyword">if</span>(file.isDirectory()) {  <span class="comment">// 判断是不是目录</span></div><div class="line">            File[] result = file.listFiles();</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; result.length; i++){</div><div class="line"><span class="comment">// System.out.println(result[i]);</span></div><div class="line"><span class="comment">// 写成资源管理器的格式 以下为输出举例</span></div><div class="line"><span class="comment">// 毕业照    2018-03-18 19:19:19		文件夹		</span></div><div class="line"><span class="comment">// 论文5.18日格式完成.docx 2018-05-29 15:15:27 文件 4.38</span></div><div class="line">                System.out.println(result[i].getName()+<span class="string">"\t\t\t"</span></div><div class="line">                        + <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>).format(<span class="keyword">new</span> Date(result[i].lastModified()))</div><div class="line">                        + <span class="string">"\t\t"</span></div><div class="line">                        + (result[i].isDirectory()?<span class="string">"文件夹"</span>:<span class="string">"文件"</span>)</div><div class="line">                        + <span class="string">"\t\t"</span></div><div class="line">                        + (result[i].isFile()?<span class="keyword">new</span> BigDecimal((<span class="keyword">double</span>)result[i].length()/<span class="number">1014</span>/<span class="number">1024</span>).divide(<span class="keyword">new</span> BigDecimal(<span class="number">1</span>),<span class="number">2</span>, BigDecimal.ROUND_HALF_UP):<span class="string">""</span>)</div><div class="line">                );</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>思考题</strong>：列出指定目录下的所有子路径</p>
<ul>
<li>原则：如果现在给定的路径依然是一个目录，那么向里继续列出所有组成，应该使用<em>递归</em>的方式完成。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.company;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) <span class="keyword">throws</span> Exception { <span class="comment">// 处理异常</span></div><div class="line">        File file = <span class="keyword">new</span> File(<span class="string">"/Users"</span> + File.separator + <span class="string">"fjiao"</span>+File.separator +<span class="string">"IDEA"</span>);</div><div class="line">        print(file);</div><div class="line">    }</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span>(File file){</div><div class="line">        <span class="keyword">if</span>(file.isDirectory()){</div><div class="line">            File result[] = file.listFiles();</div><div class="line">            <span class="keyword">if</span>(result != <span class="keyword">null</span>){     <span class="comment">// 已经可以列出的目录，不会列出隐藏文件</span></div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; result.length; i++){</div><div class="line">                    print(result[i]);</div><div class="line">                }</div><div class="line">            }</div><div class="line"></div><div class="line">        }</div><div class="line">        System.out.println(file);</div><div class="line">        <span class="comment">//file.delete();    //删除文件的恶性操作</span></div><div class="line">    }</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="4-_总结">4. 总结</h4>
<ul>
<li>File 类本身是操作文件的，不涉及到内容</li>
<li>File 类中的重要方法：<ul>
<li>设置完整的路径：<code>public File(String pathname)</code></li>
<li>删除文件：<code>public boolean delete()</code></li>
<li>判断文件是否存在：<code>public boolean exists()</code></li>
<li>找到父路径：<code>public File getParentFile()</code>;</li>
<li>创建目录（多级目录）：<code>public boolean mkdirs()</code>;</li>
</ul>
</li>
<li>在使用 File 类操作的时候路径的分隔符使用：<code>File.separator</code></li>
</ul>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Java/">Java</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 JiaojiaoFu</div></footer><script src="/js/scroller.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>
</body></html>