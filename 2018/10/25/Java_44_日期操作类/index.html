<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="JiaojiaoFu"><link rel="alternative" href="/atom.xml" title="姣姣的个人主页" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>日期操作类 - 姣姣的个人主页</title><link rel="stylesheet" href="/css/main.css" type="text/css">
<link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css" type="text/css">
<!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js" type="text/javascript"></script>
<script src="/js/fancybox/jquery.fancybox.min.js" type="text/javascript"></script>
</head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">姣姣的个人主页</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-10-24T16:00:00.000Z">October 25, 2018</time><h1 class="post__title"><a href="/2018/10/25/Java_44_日期操作类/">日期操作类</a></h1><div class="post__main echo"><p>学习日期操作类的使用<br><a id="more"></a></p>
<h3 id="日期操作类">日期操作类</h3>
<h4 id="1-_Date_类">1. Date 类</h4>
<p>Date 类属于简单 Java类的一部分。<br>Java 中提供了 java.util.Date 的类，直接表示当前的日期时间</p>
<p><strong>示例：</strong> 取得当前日期时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs){</div><div class="line">        Date date = <span class="keyword">new</span> Date();</div><div class="line">        <span class="comment">//输出格式：Fri Oct 19 00:04:29 CST 2018</span></div><div class="line">        System.out.println(date);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><code>long</code> 可以描述日期时间数据，Data 类中可以看出，有以下几个重要方法：</p>
<ul>
<li>无参构造：<code>public Date()</code></li>
<li>有参构造：<code>public Date(long date)</code>,接收 long 型数据。</li>
<li>【重点】转换为 long 型：<code>public long getTime()</code>，开发中经常用到，重点！  </li>
</ul>
<p><strong>示例：</strong> Date 类型和 long 类型的互相转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) {</div><div class="line">        <span class="keyword">long</span> cur = System.currentTimeMillis();  <span class="comment">// 取得当前时间以 long 型返回</span></div><div class="line">        Date date = <span class="keyword">new</span> Date(cur);</div><div class="line">        <span class="comment">// 输出对象信息 Fri Oct 19 00:11:40 CST 2018</span></div><div class="line">        System.out.println(date); </div><div class="line">        <span class="comment">// 输出对象信息 1539879100377  </span></div><div class="line">        System.out.println(date.getTime());     </div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="2-_日期格式化：SimpleDateFormat（核心）">2. 日期格式化：SimpleDateFormat（核心）</h4>
<p>java.text 是一个专门实现国际化程序的开发包，而 SimpleDateFormat 是一个专门处理格式化日期的工具类，即将 Date 型的对象转化为 String 形式。<br>主要使用的是以下几个方法：</p>
<ul>
<li>构造方法：<code>public SimpleDateFormat(String pattern)</code>,需要传递转换格式</li>
<li>将 Date 转换为 String：<code>public final String format(Date date)</code>;</li>
<li>将 String 转换为 Date：<code>public Date parse(String source) throws ParseException</code>。</li>
</ul>
<p>对于转换格式，常见的转换单位有 年（yyyy），月（MM），日（dd），时（HH），分（mm），秒（ss），毫秒（SSS），注意大小写！<br><strong>示例：</strong> 日期格式化显示（将 Date 型数据变为 String 型数据、将 String 型数据变为 Date 型）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.text.ParseException;</div><div class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs) {</div><div class="line">        Date date = <span class="keyword">new</span> Date();</div><div class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss:SSS"</span>);</div><div class="line">        String str = sdf.format(date);      <span class="comment">// 将 Date 型变为了 String 型</span></div><div class="line">        <span class="comment">// 输出：2018-10-19 00:29:56:400</span></div><div class="line">        System.out.println(str);</div><div class="line"></div><div class="line">        String str_date = <span class="string">"2018-10-19 00:29:56:400"</span>;</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            Date date_str = sdf.parse(str_date);    <span class="comment">// 将String 型数据转化成 Date 型</span></div><div class="line">            System.out.println(date_str);</div><div class="line">        } <span class="keyword">catch</span> (ParseException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>注意：</strong> 在将给定字符串转化为日期类型数据时，如果给定的月份不对会自动进行进位；但是如果与给定的转换格式不符，会抛出异常。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 输出：Tue Mar 19 00:29:56 CST 2019，年份进位</span></div><div class="line"><span class="constant">String str_date</span> = <span class="string">"2018-15-19 00:29:56:400"</span>;</div></pre></td></tr></table></figure>

<p>在数据表操作中说过几个常用类型：VARCHAR2(String)、CLOB(String)、Number(Double,int)、Date(java.util.Date)</p>
<ul>
<li>Date 与 String 的转换依靠的是 SimpleDateFormat；</li>
<li>String 与基本类型的转换依靠的是包装类和 String.valueOf()方法</li>
<li>long 与 Date 的转换靠的是 Date 的构造方法和getTime() 方法。</li>
</ul>
<h4 id="3-_Calendar_类">3. Calendar 类</h4>
<p>主要进行一些简单的日期计算，是一个抽象类，依靠子类进行对象实例化操作。提供了一个 static 方法返回本类对象：<code>public static Calendar getInstance()</code><br><strong>示例：</strong> 取得当前日期时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Calendar;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] agrs)  {</div><div class="line">        Calendar cal = Calendar.getInstance();</div><div class="line">        StringBuffer buf = <span class="keyword">new</span> StringBuffer();</div><div class="line">        buf.append(cal.get(Calendar.YEAR)).append(<span class="string">"-"</span>); <span class="comment">// 添加年份</span></div><div class="line">        buf.append(cal.get(Calendar.MONTH) + <span class="number">1</span> ).append(<span class="string">"-"</span>);    <span class="comment">// 添加月，因为月从 0 开始，因此要 +1</span></div><div class="line">        buf.append(cal.get(Calendar.DAY_OF_MONTH)).append(<span class="string">" "</span>); <span class="comment">//添加日</span></div><div class="line">        buf.append(cal.get(Calendar.HOUR_OF_DAY)).append(<span class="string">":"</span>);  <span class="comment">//添加时 HOUR_OF_DAY 表示 0-23 形式，HOUR表示1-24形式。</span></div><div class="line">        buf.append(cal.get(Calendar.MINUTE)).append(<span class="string">":"</span>);   <span class="comment">// 添加分</span></div><div class="line">        buf.append(cal.get(Calendar.SECOND));   <span class="comment">// 添加秒</span></div><div class="line">        <span class="comment">// output: 2018-10-19 1:2:34</span></div><div class="line">        System.out.println(buf);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>Calendar 类在取得时可以进行一些简单的计算，比如获得三天后的日期等。比使用 Date 类计算简单，Date 类需要使用 long。</p>
<h4 id="4-_总结">4. 总结</h4>
<ul>
<li>以后数据库中的日期型使用 java.util.Date 类表示；</li>
<li>代码模型：SimpleDateFormat 类实现了 String 类与 Date 类之间的互相转换。</li>
</ul>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Java/">Java</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 JiaojiaoFu</div></footer><script src="/js/scroller.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>
</body></html>